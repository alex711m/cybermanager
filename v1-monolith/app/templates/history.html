<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Historique - CyberManager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>üìú Historique des Sessions</h1>
        <a href="/" class="btn-back">‚¨ÖÔ∏è Retour au Dashboard</a>
    </div>

    <div class="summary-box">
        <strong>Chiffre d'Affaires Total :</strong> {{ total_income }} ‚Ç¨
    </div>

    <table>
        <thead>
            <tr>
                <th>ID Session</th>
                {% if current_user.is_admin %}
                    <th>Utilisateur</th>
                {% endif %}
                <th>Machine</th>
                <th>D√©but</th>
                <th>Fin</th>
                <th>Prix</th>
            </tr>
        </thead>
        <tbody>
            {% for session in sessions %}
            <tr>
                <td>#{{ session.id }}</td>
                
                {% if current_user.is_admin %}
                    <td><strong>{{ session.user.username if session.user else 'Inconnu' }}</strong></td>
                {% endif %}
                
                <td>{{ session.machine.name }}</td>
                <td>{{ session.start_time.strftime('%d/%m %H:%M') }}</td>
                <td>{{ session.end_time.strftime('%H:%M') }}</td>
                <td><strong>{{ session.total_price }} ‚Ç¨</strong></td>
            </tr>
            {% else %}
            <tr>
                <td colspan="{{ '6' if current_user.is_admin else '5' }}" style="text-align:center;">
                    Aucune session trouv√©e.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
</html>
